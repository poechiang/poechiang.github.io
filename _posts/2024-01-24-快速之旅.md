---
layout: post
title: Swift å¿«é€Ÿä¹‹æ—…
category: Swift
description: æ¢ç´¢Swiftçš„åŠŸèƒ½å’Œè¯­æ³•
tags: Swift, Tutorial

---

## Hello, World!

```sw
print("Hello, world!")
// pringts "Hello, world!"
```

## å˜é‡å’Œå¸¸æ˜Š

ä½¿ç”¨```var```å£°æ˜å˜é‡ï¼Œ```let```å£°æ˜å¸¸é‡

```sw
var myVariable = 42
myVariable = 50
let myConstant = 30
```

ä¸tsç±»ä¼¼ï¼Œå¸¸é‡ä¸å˜é‡é¡»åˆ†é…ä¸å…¶ç±»å‹å¯¹åº”çš„å€¼ï¼Œä½†å› ç¼–è¯‘å™¨çš„ç±»å‹æ¨æ–­åŠŸèƒ½è€Œæ— éœ€æ€»æ˜¯æ˜¾å¼ç¼–å†™ç±»å‹ï¼Œä»…åœ¨åˆå§‹å€¼æœªèƒ½æä¾›è¶³å¤Ÿä¿¡æ¯ï¼ˆæˆ–æ— åˆå§‹å€¼ï¼‰æ—¶ï¼Œæ‰éœ€è¦æ˜ç¡®æŒ‡å®šç›¸åº”ç±»å‹ï¼š

```sw
let implicitInteger = 70
let implicitDouble = 70.0
let explicitDouble: Double = 70
```

å¸¸/å˜é‡çš„å€¼æ°¸è¿œä¸ä¼šéšå¼è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ï¼Œå¦‚éœ€è½¬æ¢ï¼Œé¡»æ˜¾å¼åˆ›å»ºæ‰€éœ€ç±»å‹çš„å®ä¾‹ï¼š

```sw
let label = "The width is "
let width = 94
let widthLabel = label + String(width)
```

å¦‚æœè¦åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«å€¼ï¼Œå¯ä»¥ä½¿ç”¨Swiftä¸­çš„å ä½ç¬¦\\( variable / constant )ï¼Œæ­¤æ—¶æ— é¡»æ˜¾å¼è½¬æ¢ä¸ºå­—ç¬¦ç±»å‹ï¼š

```sw
let apples = 3
let oranges = 5
let appleSummary = "I have \(apples) apples."
let fruitSummary = "I have \(apples + oranges) pieces of fruit."
```

ä½¿ç”¨ä¸‰ä¸ªåŒå¼•å·ï¼ˆ"""ï¼‰å®ç°å¤šè¡Œå¹¿è¥¿ï¼Œå¼•å·å†…çš„æ¯è¡Œå¼€å¤´çš„ç¼©è¿›ï¼Œä¸ç»“æŸæ ‡è®°ï¼ˆ"""ï¼‰å¯¹é½çš„éƒ¨åˆ†ä¼šè¢«ç§»é™¤ï¼

```sw
let quotation = """
        Even though there's whitespace to the left,
        the actual lines aren't indented.
            Except for this line.
        Double quotes (") can appear without being escaped.

        I still have \(apples + oranges) pieces of fruit.
        """
```

ä½¿ç”¨ä¸€å¯¹ä¸­æ‹¬å·ï¼ˆ[]ï¼‰åˆ›å»ºæ•°ç»„å’Œå­—å…¸ï¼Œå¹¶é€šè¿‡åœ¨æ–¹æ‹¬å·å†…å†™å…¥ç´¢å¼•æˆ–é”®åæ¥è®¿é—®å…ƒç´ ï¼Œæœ€åä¸€ä¸ªå…ƒç´ å…è®¸æœ‰é€—å·ï¼š

```sw
var fruits = ["strawberries", "limes", "tangerines"]
fruits[1] = "grapes"


var occupations = [
    "Malcolm": "Captain",
    "Kaylee": "Mechanic",
 ]
occupations["Jayne"] = "Public Relations"
```

å¯ä»¥ç›´æ¥æ·»åŠ å…ƒç´ ï¼Œæ— éœ€è€ƒè™‘æ•°ç»„é•¿åº¦ï¼š
```sw
fruits.append("blueberries")
print(fruits)
// Prints "["strawberries", "grapes", "tangerines", "blueberries"]"
```

ä½¿ç”¨ï¼ˆ [ ] ï¼‰æˆ–ï¼ˆ [ : ] ï¼‰åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„æˆ–å­—å…¸çš„å®ä¾‹ï¼š

```sw
fruits = []
occupations = [:]
```

å¦‚æœè¦å°†åˆ›å»ºçš„ç©ºæ•°ç»„æˆ–å­—å…¸åˆ†é…ç»™æ–°çš„å˜é‡æˆ–å¸¸é‡ï¼Œæˆ–å…¶ä»–æ²¡æœ‰ä»»ä½•ç±»å‹ä¿¡æ¯çš„åœ°æ–¹ï¼Œéœ€è¦æŒ‡å®šç±»å‹ï¼š

```sw
let emptyArray: [String] = []
let emptyDictionary: [String: Float] = [:]
```

## æ§åˆ¶æµ

ä½¿ç”¨ifå’Œswitchæ§åˆ¶æ¡ä»¶æµç¨‹ï¼›for-inã€whileå’Œrepeat-whileå®ç°å¾ªç¯æ§åˆ¶ï¼Œæ¡ä»¶/å¾ªç¯çš„å˜é‡å‘¨å›´çš„æ‹¬å·æ˜¯å¯é€‰çš„ï¼Œä½†æ¡ä»¶/å¾ªç¯ä¸»ä½“çš„å¤§æ‹¬å·æ˜¯å¿…é¡»çš„ï¼š

```sw
let individualScores = [75, 43, 103, 87, 12]
var teamScore = 0
for score in individualScores {
    if score > 50 {
        teamScore += 3
    } else {
        teamScore += 1
    }
}
print(teamScore)
// Prints "11"
```

### ```if```/ ```switch```

+ if/switchä¸­ï¼Œæ¡ä»¶å¿…é¡»æ˜¯å¸ƒå°”è¡¨è¾¾å¼ï¼Œæ— æ³•åƒjs/tsä¸­ä¸€æ ·è¿›è¡Œä¸æ³›ç©ºå€¼è¿›è¡Œéšå¼æ¯”è¾ƒ
+ if/switchå¯ä»¥å†™åœ¨èµ‹å€¼ç¬¦å·ï¼ˆ=ï¼‰æˆ– return åï¼Œå®ç°ç±»ä¼¼çš„ä¸‰ç›®è¿ç®—

```sw
let scoreDecoration = if teamScore > 10 {
    "ğŸ‰"
} else {
    ""
}
print("Score:", teamScore, scoreDecoration)
// Prints "Score: 11 ğŸ‰"
```

ifç»“åˆletç”¨æ¥å¤„ç†å¯é€‰å€¼ï¼š

```sw
// åœ¨å€¼ç±»å‹åé¢åŠ é—®å·ï¼ˆ?ï¼‰è¡¨ç¤ºå¯é€‰å€¼ï¼ˆè¦ä¹ˆåŒ…å«ä¸€ä¸ªå€¼ï¼Œè¦ä¹ˆåŒ…å«nilè¡¨ç¤ºç¼ºå°‘ä¸€ä¸ªå€¼ï¼‰
var optionalString: String? = "Hello"
print(optionalString == nil)
// Prints "false"


var optionalName: String? = "John Appleseed"
var greeting = "Hello!"
// ä»…optionalNameæœ‰å€¼æ—¶ï¼Œæ‰ä¼šèµ‹å€¼ç»™nameå¹¶è¿›å…¥ifç»“æ„é€»è¾‘
if let name = optionalName {
    greeting = "Hello, \(name)"
}
// ä¹Ÿå¯ä½¿ç”¨åŒé—®å·ï¼ˆ??ï¼‰å¤„ç†å¯é€‰å€¼
let nickname: String? = nil
let fullName: String = "John Appleseed"
let informalGreeting = "Hi \(nickname ?? fullName)"
```

Switch æ”¯æŒä»»ä½•ç±»å‹çš„æ•°æ®å’Œå„ç§æ¯”è¾ƒæ“ä½œ - ä¸é™äºæ•´æ•°å’Œåˆ¤ç­‰æµ‹è¯•ï¼š

```sw
let vegetable = "red pepper"
switch vegetable {
case "celery":
    print("Add some raisins and make ants on a log.")
case "cucumber", "watercress":
    print("That would make a good tea sandwich.")
case let x where x.hasSuffix("pepper"):
    print("Is it a spicy \(x)?")
default:
    print("Everything tastes good in soup.")
} 
// æ¯ä¸ªåŒ¹é…çš„caseæ‰§è¡Œå®Œæ¯•åä¼šè‡ªåŠ¨è·³å‡ºï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨æ¯ä¸ªcaseå†…æ˜¾å¼break
```

### ```for-in```ã€```while```ã€```repeat-while```

ä½¿ç”¨for-iné€šè¿‡æä¾›ä¸€ä¸ªå¸¸é‡æ¥è¿­ä»£æ•°ç»„ï¼Œé€šè¿‡ä¸€ä¸ªé”®å€¼å¯¹æ¥è¿­ä»£å­—å…¸ï¼Œå­—å…¸æ˜¯ä¸€ä¸ªæ— åºé›†åˆï¼Œå› æ­¤å®ƒåŒ–çš„é”®å€¼ä»¥ä»»æ„é¡ºåºè¿­ä»£ï¼š

```sw
let interestingNumbers = [
    "Prime": [2, 3, 5, 7, 11, 13],
    "Fibonacci": [1, 1, 2, 3, 5, 8],
    "Square": [1, 4, 9, 16, 25],
]
var largest = 0
// key-value pair iterate over dictionary
for (_, numbers) in interestingNumbers {
    for number in numbers {
        if number > largest {
            largest = number
        }
    }
}
print(largest)
```

whileäºç”¨äºé‡å¤ä¸€æ®µä»£ç å—é€»è¾‘ç›´åˆ°æ¡ä»¶å‘ç”Ÿå˜åŒ–ã€‚å¾ªç¯çš„æ¡ä»¶å¯ä»¥æ”¾åœ¨æœ«å°¾ï¼Œä»¥ç¡®ä¿å¾ªç¯è‡³å°‘è¿è¡Œä¸€æ¬¡ï¼š

```sw
var n = 2
while n < 100 {
    n *= 2
}
print(n)
// Prints "128"


var m = 2
repeat {
    m *= 2
} while m < 100
print(m)
// Prints "128"   7
```

for-inå¾ªç¯ä¸­å¯ä»¥ä½¿ç”¨ï¼ˆ ..< ï¼‰åˆ›å»ºä»…ç”¨äºå¾ªç¯ä¸­çš„ç´¢å¼•ï¼š

```sw
var total = 0
// include 0, and exclude 4
for i in 0..<4 {
    total += i
}
// include 0 and 4
for i in 0..4 {
    total += i
}
print(total)
// Prints "6"
```

### å‡½æ•°å’Œè£…åŒ…

ä½¿ç”¨funcå…³é”®å­—å£°æ˜å‡½æ•°ï¼Œä½¿ç”¨->æŒ‡å®šè¿”å›ç±»å‹ï¼Œåœ¨å‡½æ•°ååè·Ÿä¸€ä¸ªç”±ä¸€å¯¹æ‹¬å·åŒ…è£¹çš„å‚æ•°åˆ—è¡¨æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼š

```sw
func greet(person: String, day: String) -> String {
    return "Hello \(person), today is \(day)."
}
greet(person: "Bob", day: "Tuesday")
```

é»˜è®¤çš„ï¼Œå‡½æ•°è°ƒç”¨æ—¶ï¼Œä½¿ç”¨å‚æ•°åç§°ä½œä¸ºå‚æ•°æ ‡ç­¾ï¼Œå¯ä»¥åœ¨å£°æ˜å‡½æ•°æ—¶ï¼Œåœ¨å‚æ•°åå‰å†™å…¥è‡ªå®šä¹‰çš„å‚æ•°æ ‡ç­¾ï¼Œæˆ–ä½¿ç”¨ï¼ˆ_ï¼‰æ˜ç¡®ä¸ä½¿ç”¨å‚æ•°æ ‡ç­¾ï¼š

```sw
func greet(_ person: String, on day: String) -> String {
    return "Hello \(person), today is \(day)."
}
greet("John", on: "Wednesday") 
```

å¯ä»¥å°†å‡½æ•°çš„è¿”å›å€¼ç±»å‹å®šä¹‰ä¸ºå…ƒç»„ï¼Œæ¥è¿”å›å¤šä¸ªå€¼ï¼š

```sw
func calculateStatistics(scores: [Int]) -> (min: Int, max: Int, sum: Int) {
    var min = scores[0]
    var max = scores[0]
    var sum = 0

    for score in scores {
        if score > max {
            max = score
        } else if score < min {
            min = score
        }
        sum += score
    }

    return (min, max, sum)
}
let statistics = calculateStatistics(scores: [5, 3, 100, 3, 9])

// å…ƒç»„å¯ä»¥é€šè¿‡å®šä¹‰æ—¶çš„åå­—å’Œå®šä¹‰æ—¶çš„ä½ç½®ä½¿ç”¨ç´¢å¼•å¼•ç”¨
print(statistics.sum)
// Prints "120"
print(statistics.2)
// Prints "120"
```

å‡½æ•°å¯ä»¥åµŒå¥—ï¼Œç”¨äºç»„ç»‡è¾ƒé•¿æˆ–å¤æ‚çš„å‡½æ•°ä¸­çš„ä»£ç ï¼š

```sw
func returnFifteen() -> Int {
    var y = 10
    func add() {
        y += 5
    }
    add()
    return y
}
returnFifteen()
```

å‡½æ•°æ˜¯æµç±»å‹ï¼Œå³ï¼šå‡½æ•°å¯ä»¥è¿”å›å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼š

```sw
func makeIncrementer() -> ((Int) -> Int) {
    func addOne(number: Int) -> Int {
        return 1 + number
    }
    return addOne
}
var increment = makeIncrementer()
increment(7)
```

å‡½æ•°ä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼š

```sw
func hasAnyMatches(list: [Int], condition: (Int) -> Bool) -> Bool {
    for item in list {
        if condition(item) {
            return true
        }
    }
    return false
}
func lessThanTen(number: Int) -> Bool {
    return number < 10
}
var numbers = [20, 19, 7, 12]
hasAnyMatches(list: numbers, condition: lessThanTen)
```

å‡½æ•°æ˜¯é—­åŒ…çš„ç‰¹ä¾‹ï¼šå¯ä»¥ç¨åè°ƒç”¨çš„ä»£ç å—ã€‚å³ä½¿åœ¨ä¸åŒçš„ä½œç”¨åŸŸä¸­æ‰§è¡Œï¼Œé—­åŒ…ä¸­çš„ä»£ç ä¹Ÿå¯ä»¥è®¿é—®åˆ›å»ºé—­åŒ…çš„ä½œç”¨åŸŸä¸­çš„å¸¸/å˜é‡å’Œå‡½æ•°ã€‚

å¯ä»¥ä½¿ç”¨èŠ±æ‹¬å·ï¼ˆbracesï¼‰ï¼ˆ { } ï¼‰å°†ä»£ç æ’æ‹¬èµ·æ¥å®šä¹‰æ²¡æœ‰åç§°çš„é—­åŒ…ï¼š

```sw
numbers.map({ (number: Int)->Int in //  in ç”¨äºåˆ†éš”å‚æ•°ã€è¿”å›ç±»å‹å’Œä¸»ä½“
	let result = 3 * number
	return result
})
// é—­åŒ…æ›´ç®€å•çš„å½¢å¼ï¼šçœç•¥é—­åŒ…å·²çŸ¥çš„å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ï¼Œå•è¯­å¥é—­åŒ…éšå¼è¿”å›å”¯ä¸€è¯­å¥å€¼ï¼š
let mappedNumbers = numbers.map({ number in 3 * number })
print(mappedNumbers)


func outter (_ a:Int,_ b:Int,adder:(Int,Int)->Int)->Void {
    print(adder(a,b))
}

// å¦‚æœé—­åŒ…æ˜¯å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥ç«‹å³å‡ºç°åœ¨æ‹¬å·åé¢ï¼š
outter(5,29) {(a:Int,b:Int)->Int in a+b}
// ä½¿ç”¨dollaç¬¦å·ï¼ˆ$ï¼‰åŠ é›¶åŸºç´¢å¼•å¼•ç”¨é—­åŒ…å‚æ•°ï¼Œå¯ä»¥çœç•¥é—­åŒ…çš„å‚æ•°å®šä¹‰
outter(4,9) {$0+$1}

let scores=[5,3,100,4,9]
// å½“é—­åŒ…æ˜¯å‡½æ•°çš„å”¯ä¸€å‚æ•°æ—¶ï¼Œå¯ä»¥å®Œå…¨çœç•¥æ‹¬å·
scores.map { $0 + 2 }
```

## å¯¹è±¡å’Œç±»

### å£°æ˜

ä½¿ç”¨classåè·Ÿç±»ååˆ›å»ºç±»ï¼Œç±»ä¸­çš„å±æ€§å£°æ˜çš„ç¼–å†™æ–¹å¼ä¸å¸¸/å˜é‡å£°æ˜æ–¹å¼ç›¸åŒï¼Œæ–¹æ³•ä¸å‡½æ•°å£°æ˜çš„ç¼–å†™æ–¹å¼ç›¸åŒï¼Œåªæ˜¯å®ƒä»¬éƒ½ä½äºç±»çš„ä¸Šä¸‹æ–‡ä¸­ï¼š

```sw
class Shape {
    var numberOfSides = 0
    let constOfSides = 4
    func simpleDescription() -> String {
        return "A shape with \(numberOfSides) sides."
    }
}
```

### å®ä¾‹åŒ–

é€šè¿‡åœ¨ç±»åå‰ååŠ æ‹¬å·æ¥åˆ›å»ºå®ä¾‹ï¼Œä½¿ç”¨ç‚¹è¯­æ³•è®¿é—®å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ï¼š

```sw
var shape = Shape() // no [new] keyword
shape.numberOfSides = 7
var shapeDescription = shape.simpleDescription()
```

### ç”Ÿå‘½å‘¨æœŸ

ç±»çš„åˆå§‹åŒ–ï¼Œé€šè¿‡initæ–¹æ³•å®ç°åˆ›å»ºç±»å®ä¾‹æ—¶çš„åˆå§‹åŒ–é€»è¾‘ï¼Œdeinitå®ç°ç±»å®ä¾‹é‡Šæ”¾æ—¶çš„æ¸…ç†é€»è¾‘ï¼š

```sw
class NamedShape {
    var numberOfSides: Int = 0
    var name: String


    init(name: String) {
       self.name = name
    }

		deinit(){
				//todo:clearn...
				self.name = nil
		}
		
    func simpleDescription() -> String {
       return "A shape with \(numberOfSides) sides."
    }
}
```

### ç»§æ‰¿

é€šè¿‡å†’å·ï¼ˆ : ï¼‰å®ç°ç±»çš„ç»§æ‰¿ï¼Œå¦‚æœè¦è¦†å†™è¶…ç±»ä¸­çš„æ–¹æ³•ï¼Œéœ€è¦æ˜¾å¼æ ‡è®°overrideï¼Œå¦åˆ™ï¼Œç¼–è¯‘å™¨ä¼šè§†ä¸ºé”™è¯¯ã€‚å¦‚æœè¢«æ ‡è®°äº†overrideä½†å®é™…ä¸Šæ²¡æœ‰è¦†å†™è¶…ç±»ä¸­çš„ä»»ä½•æ–¹æ³•ï¼Œä¹Ÿä¼šè¢«è§†ä¸ºé”™è¯¯ï¼š

```sw
class Square: NamedShape {
    var sideLength: Double

    init(sideLength: Double, name: String) {
        self.sideLength = sideLength
        super.init(name: name)
        numberOfSides = 4
    }

    func area() -> Double {
        return sideLength * sideLength
    }

    override func simpleDescription() -> String {
        return "A square with sides of length \(sideLength)."
    }
}
let test = Square(sideLength: 5.2, name: "my test square")
test.area()
test.simpleDescription()
```

### getter/setter

å±æ€§å¯ä»¥åŒ…å«getterå’Œsetterï¼Œä¹Ÿå¯ä»¥ä»…åŒ…å«getterï¼Œä½†ä¸èƒ½åªæœ‰setter

```sw
class EquilateralTriangle: NamedShape {
    var perimeter: Double {
        get {
             return 3.0 * sideLength
        }
        set {
            sideLength = newValue / 3.0 // newValueä¸ºçº¦å®šåç§°ï¼Œå¯ä»¥åœ¨setåè·Ÿæ‹¬å·ï¼Œå¹¶åœ¨æ‹¬å·å†…æŒ‡å®šå…¶ä»–åç§°
        }
    }
}
```

### willSet/didSet

å¦‚æœä»…æƒ³åœ¨ä¸ªæ€§æŸå˜é‡ä¹‹å‰æˆ–ä¹‹åæ‰§è¡ŒæŸäº›é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨willSet/didSetï¼š

```sw
class TriangleAndSquare {
    var triangle: EquilateralTriangle {
    		// willSet/didSetä¸èƒ½å’Œgetæˆ–setä¸€èµ·å‡ºç°
        willSet {
            square.sideLength = newValue.sideLength
        }
    }
    var square: Square {
        willSet {
            triangle.sideLength = newValue.sideLength
        }
    }
    init(size: Double, name: String) {
        square = Square(sideLength: size, name: name)
        triangle = EquilateralTriangle(sideLength: size, name: name)
    }
}
var triangleAndSquare = TriangleAndSquare(size: 10, name: "another test shape")
print(triangleAndSquare.square.sideLength)
// Prints "10.0"
print(triangleAndSquare.triangle.sideLength)
// Prints "10.0"
triangleAndSquare.square = Square(sideLength: 50, name: "larger square")
print(triangleAndSquare.triangle.sideLength)
// Prints "50.0"
```

ä½¿ç”¨å¯é€‰å€¼æ—¶ï¼Œå¯ä»¥åœ¨æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡æ“ä½œä¹‹å‰ä½¿ç”¨é—®å·ï¼ˆ?ï¼‰ï¼Œ?ä¹‹å‰çš„å€¼å¦‚æœä¸ºnilï¼Œåˆ™åé¢çš„æ‰€æœ‰å†…å®¹éƒ½å°†è¢«å¿½ç•¥ï¼Œæ•´ä¸ªè¡¨è¾¾å¼ä¸ºnilï¼Œå¦åˆ™ï¼Œå¯é€‰å€¼å°†è¢«å±•å¼€

## æšä¸¾å’Œç»“æ„

### æšä¸¾

ä½¿ç”¨enumåˆ›å»ºæšä¸¾ï¼Œä¸ç±»å’Œæ‰€æœ‰å…¶ä»–å‘½åç±»å‹ä¸€æ ·ï¼Œæšä¸¾å¯ä»¥å…·æœ‰ä¸å…¶å…³è”çš„æ–¹æ³•ï¼š

```sw
enum Rank: Int {
    case ace = 1
    case two, three, four, five, six, seven, eight, nine, ten
    case jack, queen, king


    func simpleDescription() -> String {
        switch self {
        // ä»¥ä¸‹å„caseä¸­ï¼Œæšä¸¾çš„å¼•ç”¨é‡‡ç”¨ç¼©å†™å½¢å¼ï¼Œå³ä¸éœ€è¦æŒ‡å®šRank
        case .ace:
            return "ace"
        case .jack:
            return "jack"
        case .queen:
            return "queen"
        case .king:
            return "king"
        default:
            return String(self.rawValue)
        }
    }
}
// åœ¨èµ‹å€¼ç»™å¸¸é‡æ—¶ï¼Œå› ä¸ºacæ²¡æœ‰ç±»å‹é™å®šï¼Œéœ€è¦å…¨åå¼•ç”¨ï¼Œå³é€šè¿‡Ranké™å®šï¼Œ
let ace = Rank.ace
//å¦‚æœæŒ‡å®šçš„ç±»å‹ï¼Œåˆ™ä¹Ÿå¯ä»¥ä½¿ç”¨ç¼©å†™å¼•ç”¨
let queen:Rank = .queen

let aceRawValue = ace.rawValue
```

é»˜è®¤æƒ…å†µä¸‹ï¼ŒSwiftåˆ†é…çš„åŸå§‹å€¼ä»0å¼€å§‹ï¼Œæ¯æ¬¡é€’å¢1ï¼Œä½†å¯ä»¥é€šè¿‡æŒ‡å®šå€¼æ¥ä¿®æ”¹æ­¤è¡Œä¸ºã€‚

ä½¿ç”¨init?.(rawValue:)åˆå§‹åŒ–ä¸€ä¸ªæšä¸¾çš„å®ä¾‹ï¼Œå¦‚æœæœ‰ä¸æ­¤åŸå§‹å€¼åŒ¹é…çš„å®šä¹‰ï¼Œåˆ™è¿”å›åˆå§‹åŒ–åçš„æšä¸¾å®ä¾‹ï¼Œå¦åˆ™è¿”å›nil:

```sw
if let convertedRank = Rank(rawValue: 3) {
    let threeDescription = convertedRank.simpleDescription()
}
```

æšä¸¾å€¼çš„å¼•ç”¨æœ‰ä¸¤ç§ï¼šåœ¨ç¼ºå°‘ç±»å‹é™å®šçš„åœ°æ–¹ï¼Œä½¿ç”¨å…¨é‡åç§°ï¼Œå³æšä¸¾ç±»å‹åŠ å­—æ®µåï¼šRank.queenï¼Œå¦‚æœæœ‰ç±»å‹é™å®šçš„åœ°æ–¹ï¼Œå¯ä»¥ä½¿ç”¨ç¼©å†™ï¼š.queen

å¦‚æœæšä¸¾å…·æœ‰åŸå§‹å€¼ï¼Œåˆ™è¿™äº›å€¼ä½œä¸ºå£°æ˜çš„ä¸€éƒ¨åˆ†ï¼Œæ„å‘³ç€ç‰¹å®šæšä¸¾å®ä¾‹å§‹ç»ˆæœ‰ç›¸åŒçš„åŸå§‹å€¼ï¼›æšä¸¾ä¹Ÿå¯ä»¥å…·æœ‰ä¸å…·ä½“å®ä¾‹å…³è”çš„å€¼ï¼Œè¿™äº›å…³è”å€¼æ˜¯åœ¨åˆ›å»ºæšä¸¾å®ä¾‹æ—¶ç¡®å®šçš„ï¼Œä¸”æ¯ä¸ªç›¸åŒçš„æšä¸¾å®ä¾‹ï¼Œå¯ä»¥æœ‰ä¸åŒçš„å…³è”å€¼ï¼š

```sw
enum ServerResponse {
    case result(String, String)
    case failure(String)
}

// åç»­å¤šä¸ªServerResponse.resultï¼Œå¯ä»¥å…³è”å¤šå¯¹ä¸åŒçš„æ—¶é—´
let success = ServerResponse.result("6:00 am", "8:09 pm")
let failure = ServerResponse.failure("Out of cheese.")


switch success {
case let .result(sunrise, sunset):
    print("Sunrise is at \(sunrise) and sunset is at \(sunset).")
case let .failure(message):
    print("Failure...  \(message)")
}
// Prints "Sunrise is at 6:00 am and sunset is at 8:09 pm."
```

### struct

ä½¿ç”¨structåˆ›å»ºç»“æ„ï¼Œç»“æ„æ”¯æŒè®¸å¤šä¸ç±»ç›¸åŒçš„è¡Œä¸ºï¼ŒåŒ…æ‹¬æ–¹æ³•å’Œåˆå§‹å€¼è®¾å®šé¡¹ã€‚ç»“æ„å’Œç±»ä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ç»“æ„åœ¨ä»£ç ä¸­ä¼ é€’æ—¶æ€»æ˜¯åˆå§‹å¤åˆ¶ï¼Œè€Œç±»åˆ™æ˜¯å¼•ç”¨ã€‚

```sw
struct Card {
    var rank: Rank
    var suit: Suit
    func simpleDescription() -> String {
        return "The \(rank.simpleDescription()) of \(suit.simpleDescription())"
    }
}
let threeOfSpades = Card(rank: .three, suit: .spades)
let threeOfSpadesDescription = threeOfSpades.simpleDescription()
```

## å¹¶å‘æ€§

ä½¿ç”¨asyncæ ‡è®°å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼š

```sw
func fetchUserID(from server: String) async -> Int {
    if server == "primary" {
        return 97
    }
    return 501
}
//é€šè¿‡awaitè°ƒç”¨å¼‚æ­¥å‡½æ•°
func fetchUsername(from server: String) async -> String {
    let userID = await fetchUserID(from: server)
    if userID == 501 {
        return "John Appleseed"
    }
    return "Guest"
}
// async letä»¥å¼‚æ­¥æ–¹å¼è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼ŒçœŸæ­£ä½¿ç”¨è¿”å›å€¼æ—¶ï¼Œå†™å…¥awaitï¼š
func connectUser(to server: String) async {
    async let userID = fetchUserID(from: server)
    async let username = fetchUsername(from: server)
    let greeting = await "Hello \(username), user ID \(userID)"
    print(greeting)
}

// Taskç”¨äºä»åŒæ­¥ä»£ç è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œè€Œæ— éœ€ç­‰å¾…
Task {
    await connectUser(to: "primary")
}
// Prints "Hello Guest, user ID 97"
//ä½¿ç”¨ä»»åŠ¡ç»„ç»„ç»‡å¹¶å‘ä»£ç 
let userIDs = await withTaskGroup(of: Int.self) { group in
    for server in ["primary", "secondary", "development"] {
        group.addTask {
            return await fetchUserID(from: server)
        }
    }
    var results: [Int] = []
    for await result in group {
        results.append(result)
    }
    return results
}
```

### Actor

actorä¸ç±»ç±»ä¼¼ï¼Œä½†actorç¡®ä¿ä¸åŒçš„å¼‚æ­¥å‡½æ•°å¯ä»¥åŒæ—¶å®‰å…¨çš„ä¸åŒä¸€Actorçš„å®ä¾‹è¿›è¡Œäº¤äº’ï¼š

```sw
actor ServerConnection {
    var server: String = "primary"
    private var activeUsers: [Int] = []
    func connect() async -> Int {
        let userID = await fetchUserID(from: server)
        // ... communicate with server ...
        activeUsers.append(userID)
        return userID
    }
}

// è°ƒç”¨actorä¸Šçš„æ–¹æ³•æˆ–å±æ€§æ—¶ï¼Œå¯ä»¥å°†ä»£ç æ ‡è®°ä¸ºawaitï¼Œä»¥æŒ‡ç¤ºå®ƒå¯èƒ½å¿…é¡»ç­‰å¾…actorä¸Šå·²è¿è¡Œçš„å…¶ä»–ä»£ç å®Œæˆï¼Œå³å¼‚æ­¥ç‰¹æ€§çš„æ‰©æ•£æ€§
let server = ServerConnection()
let userID = await server.connect()
```

## protocol

ä½¿ç”¨protocolå£°æ˜åè®®ï¼ˆå³æ¥å£ï¼‰ï¼š

```sw
protocol ExampleProtocol {
     var simpleDescription: String { get }
     mutating func adjust()
}
```

ç±»ã€æšä¸¾å’Œç»“æ„éƒ½å¯ä»¥é‡‡ç”¨åè®®ï¼š

```sw
struct SimpleStructure: ExampleProtocol {
     var simpleDescription: String = "A simple structure"
     // åœ¨é‡‡ç”¨åè®®çš„ç»“æ„ä¸­ï¼Œä½¿ç”¨mutatingå…³é”®å­—æ¥æ ‡è®°ä¿®æ”¹ç»“æ„ä¸­çš„æ–¹æ³•
     mutating func adjust() {
          simpleDescription += " (adjusted)"
     }
}
var b = SimpleStructure()
b.adjust()
let bDescription = b.simpleDescription
class SimpleClass: ExampleProtocol {
     var simpleDescription: String = "A very simple class."
     var anotherProperty: Int = 69105
     // é‡‡ç”¨åè®®çš„ç±»ä¸­åˆ™ä¸éœ€è¦ä½¿ç”¨ä»»ä½•å…³é”®å­—ï¼Œå› ä¸ºç±»ä¸­çš„æ–¹æ³•å§‹ç»ˆå…è®¸ä¿®æ”¹
     func adjust() {
          simpleDescription += "  Now 100% adjusted."
     }
}
var a = SimpleClass()
a.adjust()
let aDescription = a.simpleDescription

// ä½¿ç”¨extensionå…³é”®å­—æ¥å‘ç°æœ‰ç±»å‹è¿½åŠ åè®®å¹¶å®ç°åŠŸèƒ½
extension Int: ExampleProtocol {
    var simpleDescription: String {
        return "The number \(self)"
    }
    mutating func adjust() {
        self += 42
    }
 }
print(7.simpleDescription)
// Prints "The number 7"

// aè¿è¡Œæ—¶ç±»å‹ä¸ºSimpleClassï¼Œä½†å› é™å®šç±»å‹ä¸ºExampleProtocolï¼Œé€šè¿‡protocolClassï¼Œæ‰€ä»¥ä»…èƒ½è®¿é—®ExampleProtocolå®šä¹‰çš„æˆå‘˜
let protocolClass:any ExampleProtocä¸ºl = a
print(protocolClass.simpleDescription)
```

## é”™è¯¯å¤„ç†

å¯ä»¥é€šè¿‡ä»»ä½•é‡‡ç”¨Erroråè®®çš„ä»»ä½•ç±»å‹æ¥è¡¨ç¤ºé”™è¯¯

```sw
enum PrinterError: Error {
    case outOfPaper
    case noToner
    case onFire
}

// throwsç”¨äºæ ‡è®°å¼•å‘é”™è¯¯çš„å‡½æ•°ï¼Œå¦‚æœå‡½æ•°ä¸­å¼•å‘é”™è¯¯ï¼Œè¯¥å‡½æ•°å°†ç«‹å³è¿”å›ï¼Œä¸”è°ƒç”¨è¯¥çš„ä»£ç å°†å¤„ç†è¯¥é”™è¯¯
func send(job: Int, toPrinter printerName: String) throws -> String {
    if printerName == "Never Has Toner" {
        throw PrinterError.noToner
    }
    return "Job sent"
}

// 1ã€ä½¿ç”¨do-catchå¤„ç†é”™è¯¯ï¼Œ
//    é€šè¿‡åœ¨doå—å†…å¯èƒ½å¼•å‘é”™è¯¯çš„ä»£ç å‰å†™å…¥tryæ¥æ ‡è®°å®ƒä»¬ï¼Œ
//    catchå—å†…ï¼Œå¦‚ä¸æŒ‡å®šï¼Œç¼ºçœçš„é”™è¯¯å˜é‡åä¸ºerror
do {
    let printerResponse = try send(job: 1040, toPrinter: "Bi Sheng")
    print(printerResponse)
} catch {
    print(error)
}
// Prints "Job sent"
// å¯ä»¥æä¾›å¤šä¸ªcatchå—æ¥å¤„ç†ä¸åŒçš„é”™è¯¯ï¼Œcatchåå¯ä»¥åƒswitchçš„caseä¸€æ ·ï¼Œè·Ÿä¸€ä¸ªåŒ¹é…æ¨¡å¼
do {
    let printerResponse = try send(job: 1440, toPrinter: "Gutenberg")
    print(printerResponse)
} catch PrinterError.onFire {
    print("I'll just put this over here, with the rest of the fire.")
} catch let printerError as PrinterError {
    print("Printer error: \(printerError).")
} catch {
    print(error)
}
// Prints "Job sent"

// 2ã€ä½¿ç”¨try?å°†ç»“æœè½¬æ¢ä¸ºå¯é€‰é¡¹ï¼Œå¦‚æœå‡½æ•°å¼•å‘é”™è¯¯ï¼Œå°†ä¸¢å¼ƒå¯¹åº”çš„é”™è¯¯å¹¶è¿”å›nilç»“æœ
let printerSuccess = try? send(job: 1884, toPrinter: "Mergenthaler")
let printerFailure = try? send(job: 1885, toPrinter: "Never Has Toner")
```

ä½¿ç”¨deferå¯ä»¥åœ¨å‡½æ•°å†…å†™å…¥ä¸€æ®µå°†åœ¨è¯¥å‡½æ•°æ‰€æœ‰å…¶ä»–ä»£ç éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œå‡½æ•°è¿”å›ä¹‹å‰æ‰§è¡Œçš„ä»£ç å—ï¼Œè¯¥deferå—ä¸è®ºå‡½æ•°æ˜¯å¦å¼•å‘é”™è¯¯ï¼Œéƒ½å°†æ‰§è¡Œã€‚å¯ä»¥ä½¿ç”¨deferæ¥å°†å°†åˆå§‹åŒ–ä»£ç ä¸æ¸…ç†ä»£ç å†™åœ¨ä¸€èµ·ï¼Œå°½ç®¡å®ƒä»¬éœ€è¦åœ¨ä¸åŒæ—¶é—´è¿è¡Œï¼š

```sw
var fridgeIsOpen = false
let fridgeContent = ["milk", "eggs", "leftovers"]


func fridgeContains(_ food: String) -> Bool {
    fridgeIsOpen = true
    defer {
        fridgeIsOpen = false
    }
    let result = fridgeContent.contains(food)
    return result
}
if fridgeContains("banana") {
    print("Found a banana")
}
print(fridgeIsOpen)
// Prints "false"
```

## æ³›å‹

å¯ä»¥åœ¨å°–æ‹¬å·å†…å†™å…¥ç±»å‹å ä½ç¬¦æ¥åˆ›å»ºèƒ½ç”¨å‡½æ•°å’Œç±»å‹

```sw
func makeArray<Item>(repeating item: Item, numberOfTimes: Int) -> [Item] {
    var result: [Item] = []
    for _ in 0..<numberOfTimes {
         result.append(item)
    }
    return result
}
makeArray(repeating: "knock", numberOfTimes: 4)
```

å®šä¹‰æ³›å‹çš„æ­£æ–‡å‰å¯ä»¥é€šè¿‡whereæ·»åŠ é™å®šï¼šè¦æ±‚ç±»å‹å®ç°æŸåè®®ã€è¦æ±‚ä¸¤ä¸ªç±»å‹ç›¸åŒï¼Œæˆ–å…·æœ‰æŒ‡å®šçˆ¶ç±»ï¼š

```sw
func anyCommonElements<T: Sequence, U: Sequence>(_ lhs: T, _ rhs: U) -> Bool
    where T.Element: Equatable, T.Element == U.Element
{
    for lhsItem in lhs {
        for rhsItem in rhs {
            if lhsItem == rhsItem {
                return true
            }
        }
    }
   return false
}
anyCommonElements([1, 2, 3], [3])
```



